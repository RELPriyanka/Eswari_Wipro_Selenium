package Testing_package;

import org.testng.annotations.Test;
import org.testng.annotations.BeforeTest;
import java.time.Duration;
import java.util.ArrayList;
import org.openqa.selenium.By;
import org.openqa.selenium.JavascriptExecutor;
import org.openqa.selenium.Keys;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.interactions.Actions;
import org.openqa.selenium.support.ui.Select;
import org.testng.Assert;
import org.testng.annotations.AfterTest;

public class Own_ebay {	
	WebDriver driver;	 
	  @BeforeTest
	  public void beforeTest() throws InterruptedException {
		  driver = new ChromeDriver();
	      driver.get("https://signin.ebay.com/signin/?sgfl=lgp");	      
	      driver.manage().window().maximize();
		  driver.manage().timeouts().implicitlyWait(Duration.ofSeconds(5));	      
	      WebElement name=driver.findElement(By.id("userid"));
		    name.sendKeys("ravadapriyankael.6@gmail.com");
		    driver.findElement(By.id("signin-continue-btn")).click();		    		    
			WebElement pass=driver.findElement(By.id("pass"));
		    pass.sendKeys("Priya@678");		    
		    driver.findElement(By.id("sgnBt")).click();		     
	  }	
  String[] ele={"Watch","Phone","Bag"};
  @Test(priority = 1)
  public void search() throws InterruptedException {
      for(String d:ele) {
          WebElement search=driver.findElement(By.id("gh-ac"));
          search.clear();
          search.sendKeys(d);
          search.sendKeys(Keys.ENTER);          
      }
  }     
  @Test(priority=2)
	public void cart() throws InterruptedException {
	  WebElement b= driver.findElement(By.id("gh-ac"));
	  b.sendKeys("Bag");
      b.sendKeys(Keys.ENTER);     
      WebElement atc= driver.findElement(By.xpath("//*[@id=\"item5c5056c6ec\"]/div/div[1]/div/a/div/img"));
      atc.click();      
      ArrayList<String> tabs = new ArrayList<>(driver.getWindowHandles());
      driver.switchTo().window(tabs.get(1));
      JavascriptExecutor js=(JavascriptExecutor)driver;
      js.executeScript("window.scrollBy(0,400)");
      driver.findElement(By.id("atcBtn_btn_1")).click();
      driver.switchTo().window(tabs.get(0));
	}  
  @Test(priority=3)
	public void delcart() throws InterruptedException {	  
	  WebElement cart= driver.findElement(By.xpath("//*[@id=\"gh\"]/nav/div[2]/div[5]/div/a/span/span"));
	  cart.click();
	  WebElement del= driver.findElement(By.cssSelector("button[data-test-id=\"cart-remove-item\"]"));
	  del.click();
  } 
      
  @Test(priority=4)
 	public void address() throws InterruptedException {
	    driver.get("https://www.ebay.com/");
	    Actions a=new Actions(driver);
		WebElement change=driver.findElement(By.xpath("//*[@id=\"gh\"]/nav/div[1]/span[1]/div/button"));
		a.moveToElement(change).perform();		
	    driver.findElement(By.xpath("//*[@id=\"s0-1-4-9-3[0]-0-9-dialog\"]/div/div/ul/li[2]/a")).click();
	    driver.findElement(By.id("account-settings-link-PI")).click();	 
	    driver.findElement(By.xpath("//*[@id=\"individual_personal_info_address_edit_button\"]")).click();	    
	    WebElement n2=driver.findElement(By.id("lastName"));
	    n2.clear();
	    n2.sendKeys("Priya");
	    Thread.sleep(3000);    
	    WebElement add=driver.findElement(By.id("addressLine1"));
	    add.clear();
	    add.sendKeys("new building, new colony");
	    WebElement city=driver.findElement(By.id("city"));
	    city.clear();
	    city.sendKeys("Visakhapatnm");	 
	  	driver.findElement(By.id("country")).click();
	  	driver.findElement(By.cssSelector("select>option[value=\"IN\"]")).click();	        	         
	  	driver.findElement(By.id("stateOrProvince")).click();
	  	driver.findElement(By.cssSelector("select>option[value=\"AP\"]")).click();	         	  	 
	  	WebElement n3=driver.findElement(By.id("postalCode"));
	  	n3.clear();
	 	n3.sendKeys("535142");   
 		driver.findElement(By.id("address_edit_submit_button")).click(); 				
   }
  @Test(priority=5)
 	public void shop_b_c() throws InterruptedException {
 	driver.findElement(By.xpath("//*[@id=\"gh\"]/section/div/div/div/button")).click();
 	driver.findElement(By.cssSelector("a[_sp=\"m570.l3409\"]")).click();	
 	driver.findElement(By.xpath("/html/body/div[2]/div[2]/section[2]/section/div/ul/li[5]/span/a")).click();	
  }        
  @Test(priority=6)
  public void all_cat() throws InterruptedException {
      WebElement categoryDropdown=driver.findElement(By.id("gh-cat"));
      Select categorySelect=new Select(categoryDropdown);
      categorySelect.selectByValue("267"); 
      WebElement searchBox = driver.findElement(By.id("gh-ac"));
      searchBox.clear();
      searchBox.sendKeys("Books"); // Replace with the actual search item
      searchBox.sendKeys(Keys.ENTER);    
} 
  @Test(priority = 7)
  public void desc() {
      driver.get("https://www.ebay.com/itm/157228438909?itmmeta=01K2PZ164A30K3TQPBB2VDRCMX&hash=item249b8b957d:g:j6EAAOSwgFdoPe45&itmprp=enc%3AAQAKAAAAwMHg7L1Zz0LA5DYYmRTS30morWjwWMa86UyD37i8Y3yf7xUEQssG3dzAivS52GnCA8nY5GnRCOTNNqQh1LbTQgvemQhpDGTpPOxbhGn73gGxfzuPCq9Csb5sYSz2m%2BwvRXrwmSlAtoS%2BlDYqIacBGEO%2Bf0s00t1JaN%2FAD%2BHL%2B5FgkH1gnrsW%2F4MfOVmkQwJBJvaefodfmBXt9YpIYe1qxdCwGdCb0BTXQhsVhyCUtLpOSqxpfusm%2FB%2FJ3VCIx5ZLRQ%3D%3D%7Ctkp%3ABk9SR6LihN-VZg");
      WebElement desEle= driver.findElement(By.xpath("//*[@id=\"mainContent\"]/div[1]/div[1]/h1/span"));     
      String desc=desEle.getText();
      System.out.println("Description is:"+desc);
  }			  

  @AfterTest
  public void afterTest() {
	  driver.close(); 
		  }
  }







